<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claude Code ç‹€æ…‹åˆ—å®Œå…¨æ”»ç•¥ | Vibe Coding å¿…å‚™</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Noto Sans TC', sans-serif; }
        .gradient-text {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .card-shadow {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .card-shadow-lg {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        pre { tab-size: 4; }
        .code-block {
            background: linear-gradient(135deg, #1e1e2e 0%, #2d2d3a 100%);
        }
        .copy-btn:active { transform: scale(0.95); }
        .step-number {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Hero Section -->
    <section class="min-h-screen flex items-center justify-center px-6 py-12 bg-gradient-to-br from-indigo-50 via-white to-purple-50">
        <div class="max-w-5xl mx-auto">
            <!-- å°é¢åœ– -->
            <div class="mb-12 rounded-3xl overflow-hidden card-shadow-lg">
                <img src="cover.png" alt="Claude Code ç‹€æ…‹åˆ—å®Œå…¨æ”»ç•¥" class="w-full h-auto">
            </div>
            
            <div class="text-center">
                <h1 class="text-4xl md:text-5xl font-black mb-6 leading-tight">
                    è®“ä½ çš„ <span class="gradient-text">Claude Code</span><br>
                    é¡¯ç¤ºå¤©æ°£èˆ‡ä½¿ç”¨é‡
                </h1>
                <p class="text-xl md:text-2xl text-gray-600 mb-8 leading-relaxed">
                    Vibe Coding ä¸åªæ˜¯å¯«ç¨‹å¼ï¼Œæ›´æ˜¯ä¸€ç¨®ç”Ÿæ´»æ…‹åº¦ã€‚<br>
                    ç‹€æ…‹åˆ—è®“ä½ éš¨æ™‚æŒæ¡ AI å°è©±è„ˆçµ¡ï¼Œé‚„èƒ½çœ‹å¤©æ°£æ±ºå®šè¦ä¸è¦å‡ºé–€è²·å’–å•¡ â˜•
                </p>
                <div class="inline-flex items-center gap-2 bg-white px-6 py-3 rounded-full card-shadow text-gray-700">
                    <span class="text-green-500">â—</span>
                    <code class="text-sm">Sonnet 4.5 | Context:[â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘] 23% | æ–°ç«¹å¸‚: +22Â°C æ™´</code>
                </div>
            </div>
        </div>
    </section>

    <!-- Before / After -->
    <section class="py-20 px-6">
        <div class="max-w-6xl mx-auto">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-16">
                âœ¨ æœ‰æ²’æœ‰å·®å¾ˆå¤š
            </h2>
            <div class="grid md:grid-cols-2 gap-8">
                <!-- Before -->
                <div class="bg-white rounded-3xl p-8 card-shadow-lg border-2 border-red-100">
                    <div class="flex items-center gap-3 mb-6">
                        <span class="text-3xl">ğŸ˜µ</span>
                        <h3 class="text-2xl font-bold text-red-500">Before</h3>
                    </div>
                    <div class="bg-gray-900 rounded-xl p-4 mb-6 font-mono text-sm text-gray-400">
                        <div class="text-gray-600">> è¼¸å…¥æŒ‡ä»¤...</div>
                        <div class="mt-2 text-gray-500">ï¼ˆä»€éº¼è³‡è¨Šéƒ½æ²’æœ‰ï¼‰</div>
                    </div>
                    <ul class="space-y-3 text-gray-600">
                        <li class="flex items-start gap-2">
                            <span class="text-red-400">âœ—</span>
                            <span>ä¸çŸ¥é“ç¾åœ¨ç”¨å“ªå€‹æ¨¡å‹</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-red-400">âœ—</span>
                            <span>Context å¿«çˆ†äº†ä¹Ÿä¸çŸ¥é“</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-red-400">âœ—</span>
                            <span>è¦é–‹å¦ä¸€å€‹ App çœ‹å¤©æ°£</span>
                        </li>
                    </ul>
                </div>
                <!-- After -->
                <div class="bg-white rounded-3xl p-8 card-shadow-lg border-2 border-green-100">
                    <div class="flex items-center gap-3 mb-6">
                        <span class="text-3xl">ğŸ¯</span>
                        <h3 class="text-2xl font-bold text-green-500">After</h3>
                    </div>
                    <div class="bg-gray-900 rounded-xl p-4 mb-6 font-mono text-sm">
                        <div class="text-gray-400">> è¼¸å…¥æŒ‡ä»¤...</div>
                        <div class="mt-2 text-green-400">Opus 4.5 | Context:[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] 42% | å°åŒ—å¸‚: +28Â°C æ™´</div>
                    </div>
                    <ul class="space-y-3 text-gray-600">
                        <li class="flex items-start gap-2">
                            <span class="text-green-500">âœ“</span>
                            <span>å³æ™‚é¡¯ç¤ºæ¨¡å‹åç¨±</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-green-500">âœ“</span>
                            <span>è¦–è¦ºåŒ– Context ä½¿ç”¨é‡</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-green-500">âœ“</span>
                            <span>è‡ªå‹•å®šä½é¡¯ç¤ºå³æ™‚å¤©æ°£</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Quick Start -->
    <section class="py-20 px-6 bg-white">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-4">
                âš¡ 30 ç§’å¿«é€Ÿå•Ÿç”¨
            </h2>
            <p class="text-center text-gray-500 mb-12">æœ€ç°¡å–®çš„æ–¹å¼ï¼Œè®“ Claude Code è‡ªå‹•å¹«ä½ è¨­å®š</p>
            
            <div class="bg-gradient-to-br from-indigo-50 to-purple-50 rounded-3xl p-8 md:p-12">
                <div class="flex items-center gap-4 mb-6">
                    <div class="step-number w-10 h-10 rounded-full flex items-center justify-center text-white font-bold">1</div>
                    <h3 class="text-xl font-bold">åœ¨ Claude Code è¼¸å…¥é€™è¡ŒæŒ‡ä»¤</h3>
                </div>
                <div class="relative">
                    <div class="code-block rounded-2xl p-6 text-white overflow-x-auto">
                        <code class="text-green-400">/statusline show model name, context usage, and weather</code>
                    </div>
                    <button onclick="copyCode(this, '/statusline show model name, context usage, and weather')" 
                            class="copy-btn absolute top-3 right-3 bg-white/10 hover:bg-white/20 text-white px-3 py-1.5 rounded-lg text-sm transition-all">
                        ğŸ“‹ è¤‡è£½
                    </button>
                </div>
                <p class="mt-6 text-gray-600 flex items-start gap-2">
                    <span class="text-2xl">ğŸ’¡</span>
                    <span>Claude Code æœƒè‡ªå‹•ç”Ÿæˆè…³æœ¬ä¸¦è¨­å®šå¥½ä¸€åˆ‡ã€‚ç°¡å–®çš„å¤©æ°£é¡¯ç¤ºï¼ˆä¾ IP å®šä½ï¼‰é€™æ¨£å°±å¤ äº†ï¼</span>
                </p>
            </div>
        </div>
    </section>

    <!-- Screenshot Preview -->
    <section class="py-20 px-6 bg-gradient-to-br from-gray-900 to-slate-800">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-4 text-white">
                ğŸ“¸ å¯¦éš›æ•ˆæœ
            </h2>
            <p class="text-center text-gray-400 mb-10">è¨­å®šå®Œæˆå¾Œï¼Œç‹€æ…‹åˆ—æœƒé¡¯ç¤ºåœ¨çµ‚ç«¯æ©Ÿåº•éƒ¨</p>
            
            <div class="rounded-2xl overflow-hidden card-shadow-lg border border-gray-700">
                <img src="screenshot.png" alt="Claude Code ç‹€æ…‹åˆ—å¯¦éš›æ•ˆæœæˆªåœ–" class="w-full h-auto">
            </div>
            
            <p class="mt-6 text-center text-gray-400 text-sm">
                ç´…æ¡†è™•å³ç‚ºè‡ªè¨‚ç‹€æ…‹åˆ—ï¼šæ¨¡å‹åç¨± | Context ä½¿ç”¨é‡é€²åº¦æ¢ | æ‰€åœ¨åŸå¸‚å¤©æ°£
            </p>
        </div>
    </section>

    <!-- System Requirements -->
    <section class="py-20 px-6 bg-gradient-to-br from-slate-50 to-gray-100">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-4">
                ğŸ–¥ï¸ ç³»çµ±éœ€æ±‚
            </h2>
            <p class="text-center text-gray-500 mb-12">é–‹å§‹å‰è«‹ç¢ºèªä½ çš„ç’°å¢ƒ</p>

            <div class="grid md:grid-cols-2 gap-6 mb-10">
                <!-- macOS -->
                <div class="bg-white rounded-2xl p-6 card-shadow">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-4xl">ğŸ</span>
                        <div>
                            <h3 class="font-bold text-lg">macOS</h3>
                            <p class="text-gray-500 text-sm">æœ¬æ•™å­¸é‡å° macOS è¨­è¨ˆ</p>
                        </div>
                    </div>
                    <p class="text-gray-600 text-sm">éœ€è¦ macOS 12 (Monterey) æˆ–æ›´æ–°ç‰ˆæœ¬ï¼Œä»¥æ”¯æ´ã€Œæ·å¾‘ã€App çš„ CLI åŠŸèƒ½ã€‚</p>
                </div>

                <!-- Homebrew -->
                <div class="bg-white rounded-2xl p-6 card-shadow">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-4xl">ğŸº</span>
                        <div>
                            <h3 class="font-bold text-lg">Homebrew</h3>
                            <p class="text-gray-500 text-sm">macOS å¥—ä»¶ç®¡ç†å™¨</p>
                        </div>
                    </div>
                    <p class="text-gray-600 text-sm">ç”¨æ–¼å®‰è£ jqã€coreutils ç­‰ç›¸ä¾å¥—ä»¶ã€‚</p>
                </div>
            </div>

            <!-- Homebrew Installation -->
            <div class="bg-white rounded-3xl p-8 card-shadow-lg">
                <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
                    <span>ğŸº</span>
                    <span>å®‰è£ Homebrew</span>
                </h3>
                <p class="text-gray-600 mb-4">å¦‚æœä½ é‚„æ²’æœ‰å®‰è£ Homebrewï¼Œæ‰“é–‹çµ‚ç«¯æ©ŸåŸ·è¡Œï¼š</p>
                
                <div class="relative mb-6">
                    <div class="code-block rounded-xl p-4 text-white overflow-x-auto">
                        <code class="text-green-400 text-sm">/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"</code>
                    </div>
                    <button onclick="copyCode(this, '/bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\"')" 
                            class="copy-btn absolute top-2 right-2 bg-white/10 hover:bg-white/20 text-white px-3 py-1 rounded text-sm transition-all">
                        ğŸ“‹
                    </button>
                </div>

                <div class="bg-amber-50 border border-amber-200 rounded-xl p-4 mb-6">
                    <p class="text-amber-800 text-sm">
                        <span class="font-medium">âš ï¸ Apple Silicon (M1/M2/M3) ç”¨æˆ¶æ³¨æ„ï¼š</span><br>
                        å®‰è£å®Œæˆå¾Œï¼Œéœ€å°‡ Homebrew åŠ å…¥ PATHã€‚ä¾ç…§çµ‚ç«¯æ©Ÿé¡¯ç¤ºçš„æŒ‡ç¤ºåŸ·è¡Œï¼Œé€šå¸¸æ˜¯ï¼š
                    </p>
                    <div class="relative mt-3">
                        <div class="bg-amber-100 rounded-lg p-3 text-amber-900 font-mono text-xs overflow-x-auto">
                            echo 'eval "$(/opt/homebrew/bin/brew shellenv)"' >> ~/.zprofile<br>
                            eval "$(/opt/homebrew/bin/brew shellenv)"
                        </div>
                    </div>
                </div>

                <p class="text-gray-600 mb-4">é©—è­‰å®‰è£æˆåŠŸï¼š</p>
                <div class="relative">
                    <div class="code-block rounded-xl p-4 text-white">
                        <code>brew --version</code>
                    </div>
                    <button onclick="copyCode(this, 'brew --version')" 
                            class="copy-btn absolute top-2 right-2 bg-white/10 hover:bg-white/20 text-white px-3 py-1 rounded text-sm transition-all">
                        ğŸ“‹
                    </button>
                </div>
                <p class="mt-3 text-sm text-gray-500">æ‡‰è©²é¡¯ç¤ºé¡ä¼¼ï¼š<code class="bg-gray-100 px-2 py-0.5 rounded">Homebrew 4.x.x</code></p>
            </div>

            <!-- æ¶æ§‹æµç¨‹åœ– -->
            <div class="mt-12 bg-white rounded-3xl p-8 card-shadow-lg">
                <h3 class="text-xl font-bold mb-6 flex items-center gap-2">
                    <span>ğŸ—ºï¸</span>
                    <span>æ•´é«”æ¶æ§‹</span>
                </h3>
                <div class="rounded-2xl overflow-hidden">
                    <img src="flowchart.png" alt="Claude Code ç‹€æ…‹åˆ—æ¶æ§‹æµç¨‹åœ–" class="w-full h-auto">
                </div>
                <p class="mt-4 text-gray-500 text-sm text-center">å¾ç³»çµ±æº–å‚™åˆ°æœ€çµ‚å‘ˆç¾çš„å®Œæ•´æµç¨‹</p>
            </div>
        </div>
    </section>

    <!-- Advanced Setup -->
    <section class="py-20 px-6 bg-gray-50">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-4">
                ğŸ”§ é€²éšè¨­å®šï¼šGPS ç²¾æº–å®šä½
            </h2>
            <p class="text-center text-gray-500 mb-12">é€é macOS æ·å¾‘å–å¾—çœŸå¯¦ä½ç½®ï¼Œä¸å— VPN å½±éŸ¿</p>

            <!-- Step 1: Create Shortcut -->
            <div class="bg-white rounded-3xl p-8 card-shadow-lg mb-8">
                <div class="flex items-center gap-4 mb-6">
                    <div class="step-number w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-xl">1</div>
                    <div>
                        <h3 class="text-xl font-bold">å»ºç«‹ macOS æ·å¾‘</h3>
                        <p class="text-gray-500">è®“ç³»çµ±å–å¾— GPS ä½ç½®</p>
                    </div>
                </div>
                
                <div class="space-y-4 ml-16">
                    <div class="flex items-start gap-3">
                        <span class="bg-indigo-100 text-indigo-600 px-2 py-1 rounded text-sm font-medium">a</span>
                        <span>æ‰“é–‹ã€Œ<strong>æ·å¾‘</strong>ã€Appï¼Œé»ã€Œ+ã€æ–°å¢æ·å¾‘</span>
                    </div>
                    <div class="flex items-start gap-3">
                        <span class="bg-indigo-100 text-indigo-600 px-2 py-1 rounded text-sm font-medium">b</span>
                        <span>æœå°‹ã€Œä½ç½®ã€ï¼Œæ‹–å…¥ã€Œ<strong>å–å¾—ç›®å‰çš„ä½ç½®</strong>ã€</span>
                    </div>
                    <div class="flex items-start gap-3">
                        <span class="bg-indigo-100 text-indigo-600 px-2 py-1 rounded text-sm font-medium">c</span>
                        <span>æœå°‹ã€Œæ–‡å­—ã€ï¼Œæ‹–å…¥ã€Œ<strong>æ–‡å­—</strong>ã€</span>
                    </div>
                    <div class="flex items-start gap-3">
                        <span class="bg-indigo-100 text-indigo-600 px-2 py-1 rounded text-sm font-medium">d</span>
                        <div>
                            <span>é»é€²æ–‡å­—æ¡†ï¼Œé»ã€Œ<strong>é¸å–è®Šæ•¸</strong>ã€â†’ é¸ã€Œç›®å‰çš„ä½ç½®ã€</span>
                            <div class="mt-2 bg-amber-50 border border-amber-200 rounded-xl p-4 text-sm">
                                <span class="text-amber-600 font-medium">âš ï¸ é‡è¦ï¼š</span>
                                <span class="text-amber-800">è¦é¸è®Šæ•¸ï¼ˆè—è‰²æ¨™ç±¤ï¼‰ï¼Œä¸æ˜¯æ‰“å­—ï¼é»æ’å…¥çš„è®Šæ•¸å¾Œé¸ã€Œ<strong>å®Œæ•´è¡—é“åœ°å€</strong>ã€</span>
                            </div>
                        </div>
                    </div>
                    <div class="flex items-start gap-3">
                        <span class="bg-indigo-100 text-indigo-600 px-2 py-1 rounded text-sm font-medium">e</span>
                        <span>æ‹–å…¥ã€Œ<strong>åœæ­¢ä¸¦è¼¸å‡º</strong>ã€ï¼Œè¼¸å‡ºé¸ã€Œæ–‡å­—ã€</span>
                    </div>
                    <div class="flex items-start gap-3">
                        <span class="bg-indigo-100 text-indigo-600 px-2 py-1 rounded text-sm font-medium">f</span>
                        <span>å³éµé‡æ–°å‘½åæ·å¾‘ç‚º <code class="bg-gray-100 px-2 py-0.5 rounded">GetLocation</code></span>
                    </div>
                </div>

                <div class="mt-8 ml-16">
                    <p class="text-gray-600 mb-3">æ¸¬è©¦æ˜¯å¦æˆåŠŸï¼š</p>
                    <div class="relative">
                        <div class="code-block rounded-xl p-4 text-white">
                            <code>shortcuts run "GetLocation"</code>
                        </div>
                        <button onclick="copyCode(this, 'shortcuts run \"GetLocation\"')" 
                                class="copy-btn absolute top-2 right-2 bg-white/10 hover:bg-white/20 text-white px-3 py-1 rounded text-sm transition-all">
                            ğŸ“‹
                        </button>
                    </div>
                    <p class="mt-3 text-sm text-gray-500">æ‡‰è©²è¼¸å‡ºé¡ä¼¼ï¼š<code class="bg-gray-100 px-2 py-0.5 rounded">å°ç£æ–°ç«¹å¸‚é¦™å±±å€...</code></p>
                </div>
            </div>

            <!-- Step 2: Install Dependencies -->
            <div class="bg-white rounded-3xl p-8 card-shadow-lg mb-8">
                <div class="flex items-center gap-4 mb-6">
                    <div class="step-number w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-xl">2</div>
                    <div>
                        <h3 class="text-xl font-bold">å®‰è£ç›¸ä¾å¥—ä»¶</h3>
                        <p class="text-gray-500">ç¢ºä¿ jq å’Œ coreutils å·²å®‰è£</p>
                    </div>
                </div>
                
                <div class="relative ml-16">
                    <div class="code-block rounded-xl p-4 text-white">
                        <code>brew install jq coreutils</code>
                    </div>
                    <button onclick="copyCode(this, 'brew install jq coreutils')" 
                            class="copy-btn absolute top-2 right-2 bg-white/10 hover:bg-white/20 text-white px-3 py-1 rounded text-sm transition-all">
                        ğŸ“‹
                    </button>
                </div>
            </div>

            <!-- Step 3: Create Script -->
            <div class="bg-white rounded-3xl p-8 card-shadow-lg mb-8">
                <div class="flex items-center gap-4 mb-6">
                    <div class="step-number w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-xl">3</div>
                    <div>
                        <h3 class="text-xl font-bold">å»ºç«‹è…³æœ¬æª”æ¡ˆ</h3>
                        <p class="text-gray-500">~/.claude/statusline-command.sh</p>
                    </div>
                </div>
                
                <div class="relative ml-16">
                    <div class="code-block rounded-2xl p-6 text-white overflow-x-auto text-sm leading-relaxed">
<pre><code class="text-gray-300"><span class="text-purple-400">#!/bin/bash</span>
<span class="text-gray-500"># ============================================</span>
<span class="text-gray-500"># Claude Code ç‹€æ…‹åˆ—è…³æœ¬</span>
<span class="text-gray-500"># é¡¯ç¤ºï¼šæ¨¡å‹åç¨± | Context ä½¿ç”¨é‡ | å¤©æ°£</span>
<span class="text-gray-500"># ============================================</span>

<span class="text-gray-500"># å¿«å–è¨­å®š</span>
<span class="text-blue-400">WEATHER_CACHE</span>=<span class="text-green-400">"/tmp/weather_cache"</span>
<span class="text-blue-400">LOCATION_CACHE</span>=<span class="text-green-400">"/tmp/weather_location_cache"</span>
<span class="text-blue-400">CACHE_TTL</span>=<span class="text-orange-400">3600</span>  <span class="text-gray-500"># å¿«å– 1 å°æ™‚</span>

<span class="text-gray-500"># å¼·åˆ¶æ›´æ–°ï¼ˆè¨­å®šç’°å¢ƒè®Šæ•¸ FORCE_REFRESH=1ï¼‰</span>
[[ <span class="text-green-400">"$FORCE_REFRESH"</span> == <span class="text-green-400">"1"</span> ]] && rm -f <span class="text-green-400">"$WEATHER_CACHE"</span> <span class="text-green-400">"$LOCATION_CACHE"</span> 2>/dev/null

<span class="text-gray-500"># è®€å– Claude Code å‚³ä¾†çš„ JSONï¼ˆåŠ è¶…æ™‚é¿å…å¡ä½ï¼‰</span>
<span class="text-blue-400">input</span>=$(timeout 1 cat 2>/dev/null || echo <span class="text-green-400">'{}'</span>)

<span class="text-gray-500"># è§£ææ¨¡å‹åç¨±</span>
<span class="text-blue-400">model_name</span>=$(echo <span class="text-green-400">"$input"</span> | jq -r <span class="text-green-400">'.model.display_name // "Sonnet 4.5"'</span> 2>/dev/null || echo <span class="text-green-400">"Sonnet 4.5"</span>)

<span class="text-gray-500"># è§£æ Context ä½¿ç”¨é‡</span>
<span class="text-blue-400">usage</span>=$(echo <span class="text-green-400">"$input"</span> | jq <span class="text-green-400">'.context_window.current_usage'</span> 2>/dev/null)

<span class="text-purple-400">if</span> [[ <span class="text-green-400">"$usage"</span> != <span class="text-green-400">"null"</span> && -n <span class="text-green-400">"$usage"</span> ]]; <span class="text-purple-400">then</span>
    <span class="text-blue-400">current</span>=$(echo <span class="text-green-400">"$usage"</span> | jq <span class="text-green-400">'.input_tokens + .cache_creation_input_tokens + .cache_read_input_tokens'</span> 2>/dev/null || echo 0)
    <span class="text-blue-400">size</span>=$(echo <span class="text-green-400">"$input"</span> | jq <span class="text-green-400">'.context_window.context_window_size'</span> 2>/dev/null || echo 200000)
    <span class="text-blue-400">pct</span>=$((current * 100 / size))
    
    <span class="text-gray-500"># ç¹ªè£½ 20 æ ¼é€²åº¦æ¢</span>
    <span class="text-blue-400">filled</span>=$((pct * 20 / 100))
    <span class="text-blue-400">empty</span>=$((20 - filled))
    <span class="text-blue-400">bar</span>=$(printf <span class="text-green-400">"%${filled}s"</span> | tr <span class="text-green-400">' '</span> <span class="text-green-400">'â–ˆ'</span>)$(printf <span class="text-green-400">"%${empty}s"</span> | tr <span class="text-green-400">' '</span> <span class="text-green-400">'â–‘'</span>)
    <span class="text-blue-400">context_info</span>=$(printf <span class="text-green-400">'[%s] %d%%'</span> <span class="text-green-400">"$bar"</span> <span class="text-green-400">"$pct"</span>)
<span class="text-purple-400">else</span>
    <span class="text-blue-400">context_info</span>=<span class="text-green-400">"[â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 0%"</span>
<span class="text-purple-400">fi</span>

<span class="text-gray-500"># è®€å–å¤©æ°£å¿«å–ï¼ˆä¸é˜»å¡ï¼‰</span>
<span class="text-yellow-400">get_weather_cached</span>() {
    <span class="text-purple-400">if</span> [[ -f <span class="text-green-400">"$WEATHER_CACHE"</span> ]]; <span class="text-purple-400">then</span>
        <span class="text-blue-400">cache_age</span>=$(($(date +%s) - $(stat -f %m <span class="text-green-400">"$WEATHER_CACHE"</span> 2>/dev/null || echo 99999)))
        [[ $cache_age -lt $CACHE_TTL ]] && cat <span class="text-green-400">"$WEATHER_CACHE"</span> && <span class="text-purple-400">return</span> 0
    <span class="text-purple-400">fi</span>
    echo <span class="text-green-400">""</span>
}

<span class="text-gray-500"># è®€å–ä½ç½®å¿«å–</span>
<span class="text-yellow-400">get_location_cached</span>() {
    <span class="text-purple-400">if</span> [[ -f <span class="text-green-400">"$LOCATION_CACHE"</span> ]]; <span class="text-purple-400">then</span>
        <span class="text-blue-400">cache_age</span>=$(($(date +%s) - $(stat -f %m <span class="text-green-400">"$LOCATION_CACHE"</span> 2>/dev/null || echo 99999)))
        [[ $cache_age -lt $CACHE_TTL ]] && cat <span class="text-green-400">"$LOCATION_CACHE"</span> && <span class="text-purple-400">return</span> 0
    <span class="text-purple-400">fi</span>
    echo <span class="text-green-400">""</span>
}

<span class="text-gray-500"># èƒŒæ™¯æ›´æ–°å¤©æ°£ï¼ˆä¸é˜»å¡ä¸»æµç¨‹ï¼‰</span>
<span class="text-yellow-400">update_weather_bg</span>() {
    (
        <span class="text-gray-500"># ç°¡æ˜“é–ï¼Œé¿å…é‡è¤‡åŸ·è¡Œ</span>
        <span class="text-blue-400">lockfile</span>=<span class="text-green-400">"/tmp/weather_update.lock"</span>
        <span class="text-purple-400">if</span> [[ -f <span class="text-green-400">"$lockfile"</span> ]]; <span class="text-purple-400">then</span>
            <span class="text-blue-400">lock_age</span>=$(($(date +%s) - $(stat -f %m <span class="text-green-400">"$lockfile"</span> 2>/dev/null || echo 99999)))
            [[ $lock_age -lt 10 ]] && exit 0
        <span class="text-purple-400">fi</span>
        touch <span class="text-green-400">"$lockfile"</span>
        trap <span class="text-green-400">"rm -f '$lockfile'"</span> EXIT
        
        <span class="text-gray-500"># é€é macOS Shortcuts å–å¾—ä½ç½®</span>
        <span class="text-blue-400">loc_data</span>=$(get_location_cached)
        <span class="text-purple-400">if</span> [[ -z <span class="text-green-400">"$loc_data"</span> ]]; <span class="text-purple-400">then</span>
            <span class="text-blue-400">addr</span>=$(timeout 10 shortcuts run <span class="text-green-400">"GetLocation"</span> 2>/dev/null)
            <span class="text-purple-400">if</span> [[ -n <span class="text-green-400">"$addr"</span> ]]; <span class="text-purple-400">then</span>
                <span class="text-gray-500"># å¾åœ°å€æ“·å–ç¸£å¸‚åç¨±</span>
                <span class="text-blue-400">city</span>=$(echo <span class="text-green-400">"$addr"</span> | grep -oE <span class="text-green-400">'(å°åŒ—å¸‚|æ–°åŒ—å¸‚|æ¡ƒåœ’å¸‚|å°ä¸­å¸‚|å°å—å¸‚|é«˜é›„å¸‚|æ–°ç«¹å¸‚|æ–°ç«¹ç¸£|åŸºéš†å¸‚|å˜‰ç¾©å¸‚|å˜‰ç¾©ç¸£|è‹—æ —ç¸£|å½°åŒ–ç¸£|å—æŠ•ç¸£|é›²æ—ç¸£|å±æ±ç¸£|å®œè˜­ç¸£|èŠ±è“®ç¸£|å°æ±ç¸£|æ¾æ¹–ç¸£|é‡‘é–€ç¸£|é€£æ±Ÿç¸£)'</span> | head -1)
                [[ -n <span class="text-green-400">"$city"</span> ]] && echo <span class="text-green-400">"$city"</span> > <span class="text-green-400">"$LOCATION_CACHE"</span>
            <span class="text-purple-400">fi</span>
        <span class="text-purple-400">else</span>
            <span class="text-blue-400">city</span>=<span class="text-green-400">"$loc_data"</span>
        <span class="text-purple-400">fi</span>
        
        <span class="text-gray-500"># å¾ wttr.in å–å¾—å¤©æ°£</span>
        <span class="text-purple-400">if</span> [[ -n <span class="text-green-400">"$city"</span> ]]; <span class="text-purple-400">then</span>
            <span class="text-blue-400">weather</span>=$(timeout 3 curl -s --max-time 3 <span class="text-green-400">"wttr.in/${city}?format=%l:+%t+%C&lang=zh-tw"</span> 2>/dev/null)
        <span class="text-purple-400">else</span>
            <span class="text-blue-400">weather</span>=$(timeout 3 curl -s --max-time 3 <span class="text-green-400">"wttr.in/?format=%l:+%t+%C&lang=zh-tw"</span> 2>/dev/null)
        <span class="text-purple-400">fi</span>
        [[ -n <span class="text-green-400">"$weather"</span> ]] && echo <span class="text-green-400">"$weather"</span> > <span class="text-green-400">"$WEATHER_CACHE"</span>
    ) &
}

<span class="text-gray-500"># è®€å–å¿«å–ï¼Œè‹¥ç„¡å‰‡è§¸ç™¼èƒŒæ™¯æ›´æ–°</span>
<span class="text-blue-400">weather</span>=$(get_weather_cached)
[[ -z <span class="text-green-400">"$weather"</span> ]] && update_weather_bg

<span class="text-gray-500"># çµ„åˆè¼¸å‡º</span>
<span class="text-blue-400">parts</span>=(<span class="text-green-400">"$model_name"</span> <span class="text-green-400">"Context:$context_info"</span>)
[[ -n <span class="text-green-400">"$weather"</span> ]] && <span class="text-blue-400">parts</span>+=(<span class="text-green-400">"$weather"</span>)

printf <span class="text-green-400">'%s'</span> <span class="text-green-400">"${parts[0]}"</span>
<span class="text-purple-400">for</span> ((i=1; i<${#parts[@]}; i++)); <span class="text-purple-400">do</span>
    printf <span class="text-green-400">' | %s'</span> <span class="text-green-400">"${parts[$i]}"</span>
<span class="text-purple-400">done</span></code></pre>
                    </div>
                    <button onclick="copyScript()" 
                            class="copy-btn absolute top-3 right-3 bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-lg text-sm transition-all flex items-center gap-2">
                        <span>ğŸ“‹</span>
                        <span>è¤‡è£½è…³æœ¬</span>
                    </button>
                </div>

                <div class="mt-6 ml-16 space-y-3">
                    <p class="text-gray-600">å»ºç«‹ä¸¦è¨­å®šåŸ·è¡Œæ¬Šé™ï¼š</p>
                    <div class="relative">
                        <div class="code-block rounded-xl p-4 text-white text-sm">
<pre><code><span class="text-gray-500"># å»ºç«‹è³‡æ–™å¤¾</span>
mkdir -p ~/.claude

<span class="text-gray-500"># å»ºç«‹è…³æœ¬æª”æ¡ˆï¼ˆè²¼ä¸Šå¾ŒæŒ‰ Ctrl+D çµæŸï¼‰</span>
cat > ~/.claude/statusline-command.sh

<span class="text-gray-500"># è¨­å®šåŸ·è¡Œæ¬Šé™</span>
chmod +x ~/.claude/statusline-command.sh</code></pre>
                        </div>
                        <button onclick="copyCode(this, 'mkdir -p ~/.claude\ncat > ~/.claude/statusline-command.sh\nchmod +x ~/.claude/statusline-command.sh')" 
                                class="copy-btn absolute top-2 right-2 bg-white/10 hover:bg-white/20 text-white px-3 py-1 rounded text-sm transition-all">
                            ğŸ“‹
                        </button>
                    </div>
                </div>
            </div>

            <!-- Step 4: Configure -->
            <div class="bg-white rounded-3xl p-8 card-shadow-lg">
                <div class="flex items-center gap-4 mb-6">
                    <div class="step-number w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-xl">4</div>
                    <div>
                        <h3 class="text-xl font-bold">è¨­å®š Claude Code</h3>
                        <p class="text-gray-500">~/.claude/settings.json</p>
                    </div>
                </div>
                
                <div class="relative ml-16">
                    <div class="code-block rounded-xl p-4 text-white">
<pre><code>{
  <span class="text-blue-400">"statusline"</span>: {
    <span class="text-blue-400">"command"</span>: <span class="text-green-400">"~/.claude/statusline-command.sh"</span>
  }
}</code></pre>
                    </div>
                    <button onclick="copyCode(this, '{\n  \"statusline\": {\n    \"command\": \"~/.claude/statusline-command.sh\"\n  }\n}')" 
                            class="copy-btn absolute top-2 right-2 bg-white/10 hover:bg-white/20 text-white px-3 py-1 rounded text-sm transition-all">
                        ğŸ“‹
                    </button>
                </div>
                
                <div class="mt-6 ml-16 bg-green-50 border border-green-200 rounded-xl p-4">
                    <p class="text-green-800 flex items-center gap-2">
                        <span class="text-xl">âœ…</span>
                        <span>é‡æ–°å•Ÿå‹• Claude Codeï¼Œç‹€æ…‹åˆ—å°±æœƒå‡ºç¾äº†ï¼</span>
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Tips -->
    <section class="py-20 px-6 bg-white">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-12">
                ğŸ’¡ å°æŠ€å·§
            </h2>
            
            <div class="grid md:grid-cols-2 gap-6">
                <div class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6">
                    <div class="text-2xl mb-3">ğŸ”„</div>
                    <h3 class="font-bold mb-2">å¼·åˆ¶æ›´æ–°å¤©æ°£</h3>
                    <code class="text-sm bg-white px-3 py-1 rounded">FORCE_REFRESH=1 ~/.claude/statusline-command.sh</code>
                </div>
                
                <div class="bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-6">
                    <div class="text-2xl mb-3">ğŸ—‘ï¸</div>
                    <h3 class="font-bold mb-2">æ¸…é™¤å¿«å–</h3>
                    <code class="text-sm bg-white px-3 py-1 rounded">rm /tmp/weather_cache /tmp/weather_location_cache</code>
                </div>
                
                <div class="bg-gradient-to-br from-amber-50 to-orange-50 rounded-2xl p-6">
                    <div class="text-2xl mb-3">ğŸŒ</div>
                    <h3 class="font-bold mb-2">ä½¿ç”¨ VPN æ™‚</h3>
                    <p class="text-sm text-gray-600">IP å®šä½æœƒé¡¯ç¤º VPN ä¼ºæœå™¨ä½ç½®ï¼Œå»ºè­°ç”¨ GPS å®šä½æ–¹æ¡ˆ</p>
                </div>
                
                <div class="bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-6">
                    <div class="text-2xl mb-3">â±ï¸</div>
                    <h3 class="font-bold mb-2">èª¿æ•´å¿«å–æ™‚é–“</h3>
                    <p class="text-sm text-gray-600">ä¿®æ”¹ <code class="bg-white px-1 rounded">CACHE_TTL=3600</code>ï¼ˆç§’ï¼‰</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="py-12 px-6 bg-gray-900 text-gray-400">
        <div class="max-w-4xl mx-auto text-center">
            <p class="mb-4">Made with ğŸ’œ for Vibe Coders</p>
            <p class="text-sm">å¤©æ°£è³‡æ–™ä¾†æºï¼š<a href="https://wttr.in" class="text-indigo-400 hover:underline">wttr.in</a></p>
        </div>
    </footer>

    <script>
        // è¤‡è£½åŠŸèƒ½
        function copyCode(btn, text) {
            navigator.clipboard.writeText(text).then(() => {
                const originalText = btn.innerHTML;
                btn.innerHTML = 'âœ… å·²è¤‡è£½';
                btn.classList.add('bg-green-500/20');
                setTimeout(() => {
                    btn.innerHTML = originalText;
                    btn.classList.remove('bg-green-500/20');
                }, 2000);
            });
        }

        // è¤‡è£½å®Œæ•´è…³æœ¬
        function copyScript() {
            const script = `#!/bin/bash
# ============================================
# Claude Code ç‹€æ…‹åˆ—è…³æœ¬
# é¡¯ç¤ºï¼šæ¨¡å‹åç¨± | Context ä½¿ç”¨é‡ | å¤©æ°£
# ============================================

# å¿«å–è¨­å®š
WEATHER_CACHE="/tmp/weather_cache"
LOCATION_CACHE="/tmp/weather_location_cache"
CACHE_TTL=3600  # å¿«å– 1 å°æ™‚

# å¼·åˆ¶æ›´æ–°ï¼ˆè¨­å®šç’°å¢ƒè®Šæ•¸ FORCE_REFRESH=1ï¼‰
[[ "$FORCE_REFRESH" == "1" ]] && rm -f "$WEATHER_CACHE" "$LOCATION_CACHE" 2>/dev/null

# è®€å– Claude Code å‚³ä¾†çš„ JSONï¼ˆåŠ è¶…æ™‚é¿å…å¡ä½ï¼‰
input=$(timeout 1 cat 2>/dev/null || echo '{}')

# è§£ææ¨¡å‹åç¨±
model_name=$(echo "$input" | jq -r '.model.display_name // "Sonnet 4.5"' 2>/dev/null || echo "Sonnet 4.5")

# è§£æ Context ä½¿ç”¨é‡
usage=$(echo "$input" | jq '.context_window.current_usage' 2>/dev/null)

if [[ "$usage" != "null" && -n "$usage" ]]; then
    current=$(echo "$usage" | jq '.input_tokens + .cache_creation_input_tokens + .cache_read_input_tokens' 2>/dev/null || echo 0)
    size=$(echo "$input" | jq '.context_window.context_window_size' 2>/dev/null || echo 200000)
    pct=$((current * 100 / size))
    
    # ç¹ªè£½ 20 æ ¼é€²åº¦æ¢
    filled=$((pct * 20 / 100))
    empty=$((20 - filled))
    bar=$(printf "%\${filled}s" | tr ' ' 'â–ˆ')$(printf "%\${empty}s" | tr ' ' 'â–‘')
    context_info=$(printf '[%s] %d%%' "$bar" "$pct")
else
    context_info="[â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 0%"
fi

# è®€å–å¤©æ°£å¿«å–ï¼ˆä¸é˜»å¡ï¼‰
get_weather_cached() {
    if [[ -f "$WEATHER_CACHE" ]]; then
        cache_age=$(($(date +%s) - $(stat -f %m "$WEATHER_CACHE" 2>/dev/null || echo 99999)))
        [[ $cache_age -lt $CACHE_TTL ]] && cat "$WEATHER_CACHE" && return 0
    fi
    echo ""
}

# è®€å–ä½ç½®å¿«å–
get_location_cached() {
    if [[ -f "$LOCATION_CACHE" ]]; then
        cache_age=$(($(date +%s) - $(stat -f %m "$LOCATION_CACHE" 2>/dev/null || echo 99999)))
        [[ $cache_age -lt $CACHE_TTL ]] && cat "$LOCATION_CACHE" && return 0
    fi
    echo ""
}

# èƒŒæ™¯æ›´æ–°å¤©æ°£ï¼ˆä¸é˜»å¡ä¸»æµç¨‹ï¼‰
update_weather_bg() {
    (
        # ç°¡æ˜“é–ï¼Œé¿å…é‡è¤‡åŸ·è¡Œ
        lockfile="/tmp/weather_update.lock"
        if [[ -f "$lockfile" ]]; then
            lock_age=$(($(date +%s) - $(stat -f %m "$lockfile" 2>/dev/null || echo 99999)))
            [[ $lock_age -lt 10 ]] && exit 0
        fi
        touch "$lockfile"
        trap "rm -f '$lockfile'" EXIT
        
        # é€é macOS Shortcuts å–å¾—ä½ç½®
        loc_data=$(get_location_cached)
        if [[ -z "$loc_data" ]]; then
            addr=$(timeout 10 shortcuts run "GetLocation" 2>/dev/null)
            if [[ -n "$addr" ]]; then
                # å¾åœ°å€æ“·å–ç¸£å¸‚åç¨±
                city=$(echo "$addr" | grep -oE '(å°åŒ—å¸‚|æ–°åŒ—å¸‚|æ¡ƒåœ’å¸‚|å°ä¸­å¸‚|å°å—å¸‚|é«˜é›„å¸‚|æ–°ç«¹å¸‚|æ–°ç«¹ç¸£|åŸºéš†å¸‚|å˜‰ç¾©å¸‚|å˜‰ç¾©ç¸£|è‹—æ —ç¸£|å½°åŒ–ç¸£|å—æŠ•ç¸£|é›²æ—ç¸£|å±æ±ç¸£|å®œè˜­ç¸£|èŠ±è“®ç¸£|å°æ±ç¸£|æ¾æ¹–ç¸£|é‡‘é–€ç¸£|é€£æ±Ÿç¸£)' | head -1)
                [[ -n "$city" ]] && echo "$city" > "$LOCATION_CACHE"
            fi
        else
            city="$loc_data"
        fi
        
        # å¾ wttr.in å–å¾—å¤©æ°£
        if [[ -n "$city" ]]; then
            weather=$(timeout 3 curl -s --max-time 3 "wttr.in/\${city}?format=%l:+%t+%C&lang=zh-tw" 2>/dev/null)
        else
            weather=$(timeout 3 curl -s --max-time 3 "wttr.in/?format=%l:+%t+%C&lang=zh-tw" 2>/dev/null)
        fi
        [[ -n "$weather" ]] && echo "$weather" > "$WEATHER_CACHE"
    ) &
}

# è®€å–å¿«å–ï¼Œè‹¥ç„¡å‰‡è§¸ç™¼èƒŒæ™¯æ›´æ–°
weather=$(get_weather_cached)
[[ -z "$weather" ]] && update_weather_bg

# çµ„åˆè¼¸å‡º
parts=("$model_name" "Context:$context_info")
[[ -n "$weather" ]] && parts+=("$weather")

printf '%s' "\${parts[0]}"
for ((i=1; i<\${#parts[@]}; i++)); do
    printf ' | %s' "\${parts[$i]}"
done`;

            navigator.clipboard.writeText(script).then(() => {
                const btn = document.querySelector('[onclick="copyScript()"]');
                const originalText = btn.innerHTML;
                btn.innerHTML = '<span>âœ…</span><span>å·²è¤‡è£½</span>';
                btn.classList.add('bg-green-500/20');
                setTimeout(() => {
                    btn.innerHTML = originalText;
                    btn.classList.remove('bg-green-500/20');
                }, 2000);
            });
        }
    </script>

</body>
</html>
